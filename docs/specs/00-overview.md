# Horizon フレームワーク 概要仕様

## 1. 概要

Horizonは、Zig言語で開発された高性能なWebフレームワークです。jetzigを参考に設計されており、シンプルで拡張性の高いAPIを提供します。

### 1.1 設計思想

- **シンプルさ**: 直感的で理解しやすいAPI
- **パフォーマンス**: Zigの特性を活かした高速な処理
- **拡張性**: ミドルウェアシステムによる柔軟な拡張
- **型安全性**: Zigの型システムによる安全性の確保

### 1.2 主要機能

1. **HTTPサーバー**: 高性能なHTTPサーバー実装
2. **ルーティング**: RESTfulなルーティングシステム
3. **リクエスト/レスポンス**: リクエストとレスポンスの簡単な操作
4. **JSONサポート**: JSONレスポンスの簡単な生成
5. **ミドルウェア**: カスタムミドルウェアチェーンのサポート
6. **セッション管理**: セッション管理機能

## 2. アーキテクチャ

### 2.1 全体構成

```
┌─────────────────┐
│   HTTP Client   │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│  Server (HTTP)  │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│     Router      │
└────────┬────────┘
         │
    ┌────┴────┐
    │         │
    ▼         ▼
┌────────┐ ┌──────────────┐
│Request │ │  Middleware   │
│Handler │ │    Chain      │
└───┬────┘ └──────┬────────┘
    │             │
    └─────┬───────┘
          │
          ▼
    ┌──────────┐
    │ Response │
    └──────────┘
```

### 2.2 モジュール構成

- **server.zig**: HTTPサーバーの実装
- **router.zig**: ルーティングシステム
- **request.zig**: HTTPリクエストの処理
- **response.zig**: HTTPレスポンスの生成
- **middleware.zig**: ミドルウェアシステム
- **session.zig**: セッション管理
- **utils/errors.zig**: エラー定義

### 2.3 データフロー

1. HTTPリクエストがサーバーに到達
2. サーバーがリクエストを`Request`オブジェクトに変換
3. ルーターがリクエストのメソッドとパスに基づいてルートを検索
4. 見つかったルートに対して、グローバルミドルウェアまたはルート固有のミドルウェアを実行
5. ルートハンドラーが実行され、`Response`オブジェクトを生成
6. レスポンスがクライアントに送信される

## 3. 技術要件

### 3.1 言語・バージョン

- Zig 0.15.2以上

### 3.2 依存関係

- Zig標準ライブラリのみ（外部依存なし）

### 3.3 プラットフォーム

- Linux
- macOS
- Windows（Docker環境推奨）

## 4. パフォーマンス特性

- **低レイテンシ**: Zigのコンパイル時最適化による高速処理
- **メモリ効率**: 明示的なメモリ管理による効率的なリソース使用
- **スケーラビリティ**: 非同期処理の準備（将来の拡張）

## 5. セキュリティ考慮事項

- セッションIDは暗号学的に安全な乱数生成器を使用
- メモリ安全性は開発者の責任（Zigの特性）
- 入力検証はアプリケーションレベルで実装が必要

## 6. 今後の拡張予定

- ファイルベースルーティング
- HTMLテンプレートエンジン
- データベース統合
- 認証・認可ミドルウェア
- WebSocketサポート

